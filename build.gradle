/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java library project to get you started.
 * For more details take a look at the 'Building Java & JVM projects' chapter in the Gradle
 * User Manual available at https://docs.gradle.org/7.4.2/userguide/building_java_projects.html
 */

buildscript {    // Configuration for building
  repositories {
    	mavenCentral()
        mavenLocal()
        jcenter()
        google()    
  }
  dependencies {
    classpath 'com.google.cloud.tools:appengine-gradle-plugin:1.3.3' // If a newer version is available, use it
     
  }
}

repositories {   // repositories for Jar's you access in your code
  mavenCentral()
        mavenLocal()
        jcenter()
        google() 
}

apply plugin: 'java'                              // standard Java tasks
apply plugin: 'war'                               // standard Web Archive plugin
apply plugin: 'com.google.cloud.tools.appengine'  // App Engine tasks
apply plugin: 'eclipse'


def appengineVersion = "1.9.90"
dependencies {
  compile 'com.google.appengine:appengine-api-1.0-sdk:1.9.90'  // Latest App Engine Api's
  providedCompile 'javax.servlet:javax.servlet-api:3.1.0'
  implementation 'com.google.cloud:google-cloud-pubsub:0.3.0'

  implementation 'jstl:jstl:1.2'
  implementation platform('com.google.cloud:libraries-bom:20.8.0')

// Add your dependencies here.
//  implementation 'com.google.cloud:google-cloud:+'   // Latest Cloud API's http://googlecloudplatform.github.io/google-cloud-java

  testImplementation 'junit:junit:4.13.2'
  testImplementation 'com.google.truth:truth:1.1.3'
  testImplementation 'org.mockito:mockito-all:1.10.19'


  testCompile group: 'com.google.appengine', name: 'appengine-testing', version: "${appengineVersion}"
    
  testCompile group: 'com.google.appengine', name: 'appengine-api-stubs', version: "${appengineVersion}"  
  testCompile group: 'com.google.cloud', name: 'google-cloud-pubsub', version: '1.32.0'
  
    
  //testImplementation 'com.google.appengine:appengine-tools-sdk:+'
}

// Always run unit tests
appengineDeploy.dependsOn test
appengineStage.dependsOn test

appengine {  // App Engine tasks configuration
 

  deploy {   // deploy configuration
    project = 'fullhistoryinternsproject'
    version = '1'
    stopPreviousVersion = 'true'
    promote = 'true'
    //deployables = 'build/exploded-AppEngineTestProject/WEB_INF/appengine-web.xml'
  }
}


test {
  useJUnit()
  testLogging.showStandardStreams = true
  beforeTest { descriptor ->
     logger.lifecycle("test: " + descriptor + "  Running")
  }


  onOutput { descriptor, event ->
     logger.lifecycle("test: " + descriptor + ": " + event.message )
  }
  afterTest { descriptor, result ->
    logger.lifecycle("test: " + descriptor + ": " + result )
  }
}

group   = "com.example.appenginej8"        // Generated output GroupId
version = "1.0-SNAPSHOT"       // Version in generated output

sourceCompatibility = 1.8     // App Engine Flexible uses Java 8
targetCompatibility = 1.8     // App Engine Flexible uses Java 8